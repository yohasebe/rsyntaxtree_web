$(function(){function l(e,t){d&&clearInterval(d),$("#alert").empty();var a=$("<span class='text text-"+t+"'>\u25cf</span> <span style='font-size: 0.9em; font-family: Menlo, Monaco, Consolas, monospace; font-weight:regular; color:white;'>"+e+"</span>");$("#alert").append(a),d=setTimeout(function(){$("#alert").html(p)},15e3)}function a(e){var t="data="+encodeURIComponent(e);return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t+"&leafstyle="+$("select[name=leafstyle]").val())+"&fontstyle="+$("select[name=fontstyle]").val())+"&fontsize="+$("select[name=fontsize]").val())+"&vheight="+$("select[name=vheight]").val())+"&polyline="+$("input[name=polyline]:checked").val())+"&color="+$("select[name=color]").val())+"&linewidth="+$("select[name=linewidth]").val())+"&symmetrize="+$("input[name=symmetrize]:checked").val())+"&transparent="+$("input[name=transparent]:checked").val())+"&hide_default_connectors="+$("input[name=hide_default_connectors]:checked").val()}function n(){$("button.draw").attr("disabled","disabled"),$("#result").resizable("destroy"),l("Please wait ...","warning")}function i(){$("button.draw").removeAttr("disabled"),$("#result").resizable({handles:"se",grid:[1e7,1]}).on("resize",function(){})}function o(e,t){n(),"svg"==t?$.ajax({url:u+"/draw_svg",type:"POST",dataType:"json",data:a(e)}).done(function(e){if("success"===e.status){var t=e.svg;$("#result").empty();var a="data:image/svg+xml;base64, "+t,n=new Image;n.src=a;var o=$(n).attr("id","tree_image"),r=$("<a href='"+a+"' data-lightbox='syntree'>");r.append(o),$("#result").append(r),i(),l("Syntree generated successfully","success"),$("body, html").animate({scrollTop:top},500)}else{var s=e.message;i(),l(s,"warning"),$("body, html").animate({scrollTop:top},500)}}).fail(function(){i(),l("Error: Something unexpected occurred","danger"),$("body, html").animate({scrollTop:top},500)}):$.ajax({url:u+"/draw_png",type:"POST",dataType:"json",data:a(e)}).done(function(e){if("success"===e.status){var t=e.png;$("#result").empty();var a="data:image/png;base64, "+t,n=new Image;n.src=a;var o=$(n).attr("id","tree_image"),r=$("<a href='"+a+"' data-lightbox='syntree'>");r.append(o),$("#result").append(r),i(),l("Syntree generated successfully","success"),$("body, html").animate({scrollTop:top},500)}else{var s=e.message;i(),l(s,"danger"),$("body, html").animate({scrollTop:top},500)}}).fail(function(){i(),l("Error: Something unexpected occurred","danger"),$("body, html").animate({scrollTop:top},500)})}function r(e){return e=e.replace(/\&/g,"-AMP-").replace(/\%/g,"-PERCENT-").replace(/\'/g,"-PRIME-").replace(/\;/g,"-SCOLON-").replace(/\</g,"-OABRACKET-").replace(/\>/g,"-CABRACKET-"),e=$("<div/>").text(e).html()}function s(e,t){$("<form/>",{action:u+"/download_"+t,method:"POST"}).append($("<input/>",{type:"hidden",name:"data",value:e})).append($("<input/>",{type:"hidden",name:"format",value:$("select[name=format]").val()})).append($("<input/>",{type:"hidden",name:"leafstyle",value:$("select[name=leafstyle]").val()})).append($("<input/>",{type:"hidden",name:"fontstyle",value:$("select[name=fontstyle]").val()})).append($("<input/>",{type:"hidden",name:"fontsize",value:$("select[name=fontsize]").val()})).append($("<input/>",{type:"hidden",name:"vheight",value:$("select[name=vheight]").val()})).append($("<input/>",{type:"hidden",name:"polyline",value:$("input[name=polyline]:checked").val()})).append($("<input/>",{type:"hidden",name:"color",value:$("select[name=color]").val()})).append($("<input/>",{type:"hidden",name:"linewidth",value:$("select[name=linewidth]").val()})).append($("<input/>",{type:"hidden",name:"symmetrize",value:$("input[name=symmetrize]:checked").val()})).append($("<input/>",{type:"hidden",name:"hide_default_connectors",value:$("input[name=hide_default_connectors]:checked").val()})).append($("<input/>",{type:"hidden",name:"transparent",value:$("input[name=transparent]:checked").val()})).appendTo(document.body).submit()}var e=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase());define("ace/mode/custom",[],function(e,t){var a=require("ace/lib/oop"),n=require("ace/mode/text").Mode,o=require("ace/mode/custom_highlight_rules").CustomHighlightRules,r=require("ace/mode/behaviour/cstyle").CstyleBehaviour,s=function(){this.HighlightRules=o,this.$behaviour=new r};a.inherits(s,n),function(){}.call(s.prototype),t.Mode=s}),define("ace/mode/custom_highlight_rules",[],function(e,t){var a=e("ace/lib/oop"),n=e("ace/mode/text_highlight_rules").TextHighlightRules,o=function(){this.$rules={start:[{token:["text","string","text"],regex:/(\[)(\S+)(\])/,next:"start"},{token:["text","keyword"],regex:/(\[)(\S+)/,next:"start"},{token:"text",regex:/\]/,next:"start"},{defaultToken:"string",next:"start"}]},this.normalizeRules()};a.inherits(o,n),t.CustomHighlightRules=o});var c=ace.edit("editor");c.setTheme("ace/theme/textmate"),c.setOption("highlightActiveLine",!1),c.session.setMode("ace/mode/custom"),c.session.setOption("wrap",!0),c.session.setOption("tabSize",2),c.renderer.setOption("fontSize",14),c.renderer.setOption("showPrintMargin",!1),c.setAutoScrollEditorIntoView(!0),e?(c.renderer.setOption("showGutter",!1),c.setOption("showLineNumbers",!1)):(c.renderer.setOption("showGutter",!0),c.setOption("showLineNumbers",!0)),i();var d,u=$("#top").data("subdir"),p=$("<span class='text text-info'>\u25cf</span> <span class='alertmessage'></span>");$("#draw_png").click(function(){$("#alert").empty();var t=c.getValue();t=r(t),$.ajax({type:"POST",dataType:"json",url:u+"/check",data:a(t)}).done(function(e){"failure"===e.status?(l(e.message,"danger"),$("body, html").animate({scrollTop:top},500)):($("input[name=transparent]:checked").val()?$("#result").css("background-color","transparent"):$("#result").css("background-color","white"),o(t,"png"))}).fail(function(){i(),l("Error: Unexpected type of input","danger")})}),$("#draw_svg").click(function(){$("#alert").empty();var t=c.getValue();t=r(t),$.ajax({type:"POST",dataType:"json",url:u+"/check",data:a(t)}).done(function(e){"failure"===e.status?(l(e.message,"danger"),$("body, html").animate({scrollTop:top},500)):($("input[name=transparent]:checked").val()?$("#result").css("background-color","transparent"):$("#result").css("background-color","white"),o(t,"svg"))}).fail(function(){i(),l("Error: Something unexpected occurred","danger"),$("body, html").animate({scrollTop:top},500)})}),$("#download_png").click(function(){$("#alert").empty();var t=c.getValue();t=r(t),$.ajax({type:"POST",dataType:"json",url:u+"/check_plus",data:a(t)}).done(function(e){"failure"===e.status?(l(e.message,"warning"),$("body, html").animate({scrollTop:top},500)):(l("Syntree generated successfully","success"),s(t,"png"))}).fail(function(){i(),l("Error: Something unexpected occurred","danger"),$("body, html").animate({scrollTop:top},500)})}),$("#download_svg").click(function(){$("#alert").empty();var t=c.getValue();t=r(t),$.ajax({type:"POST",dataType:"json",url:u+"/check_plus",data:a(t)}).done(function(e){"failure"===e.status?(l(e.message,"warning"),$("body, html").animate({scrollTop:top},500)):(l("Syntree generated successfully","success"),s(t,"svg"))}).fail(function(){i(),l("Error: Something unexpected occurrred","danger"),$("body, html").animate({scrollTop:top},500)})}),$("#check").click(function(){var e=c.getValue();$.ajax({type:"POST",dataType:"json",url:u+"/check",data:"data="+r(e)}).done(function(e){"failure"===e.status?l(e.message,"warning"):l("Brackets are balanced","success")}).fail(function(){i(),l("Error: Something unexpected occurred","danger")})}),$("#clear").click(function(){c.setValue("");$("#alert").empty()}),c.focus(),$("#editor").resizable({handles:"se",grid:[1e7,1]}).on("resize",function(){c.resize()}),$("#result").resizable({handles:"se",grid:[1e7,1]}).on("resize",function(){}),$(document).on("scroll",function(){100<$(window).scrollTop()?$(".ctrl-wrapper.scroll-top").addClass("show"):$(".ctrl-wrapper.scroll-top").removeClass("show")}),$("#to-top").click(function(){$("html, body").animate({scrollTop:$("body").offset().top},40)}),$(document).click(function(e){var t=$(e.target);!0!==$(".navbar-collapse").hasClass("show")||t.hasClass("navbar-toggler")||$(".navbar-toggler").click()}),$(".next").click(function(){return $(".carousel").carousel("next"),!1}),$(".prev").click(function(){return $(".carousel").carousel("prev"),!1}),$(".carousel").carousel({interval:12e3});var t=$(".carousel-inner .carousel-item"),m=Math.floor(Math.random()*t.length);m=Math.floor(Math.random()*t.length);t.removeClass("active").eq(m).addClass("active"),t.eq(m).addClass("active"),c.setBehavioursEnabled(!1),$("#auto-bracket").click(function(){$("#auto-bracket").prop("checked")?c.setBehavioursEnabled(!0):c.setBehavioursEnabled(!1)}),lightbox.option({resizeDuration:200})});
